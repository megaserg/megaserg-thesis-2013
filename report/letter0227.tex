\input{preamble.tex}

\begin{document}
 Мне кажется, нам надо уточнить/расширить нашу формальную модель. После
этого должно быть попроще.

    Мы сейчас считаем, что у нас отображения d и gen действуют на множестве
входов. Вообще говоря это не обязательно так.

    Я предлагаю считать, что d действует на множестве порождений. Даже точнее,

    $$d : \Sigma\to 2^\Omega$$

    есть в точности необходимый и достаточный контекст. Что касается gen, то она
устроена так:

    $$gen : 2^\Omega\to\Sigma\to 2^\Omega$$

    и подчиняется правилам $gen(d(s),s)=gen(\omega,s)$, если $d(s)\subseteq\omega$ и
$gen(\omega,s)$ не определено, если $\omega\subset d(s)$.

    Смысл в том, что для компиляции входа нам нужен некоторый контекст, который
мы представляем в виде множества порождений. Результат компиляции --- это тоже
некоторое множество порождений. Мы интерпретируем порождение не как
класс-файл (или объектный файл), а как некоторый неделимый атрибут (например,
поле класса, метод, тип, сам класс и т.д.)

    Отсюда следует новая трактовка функции d --- она просто говорит нам, какая совокупность
атрибутов должна быть предоставлена при компиляции данного входа. Эта совокупность
вообще говоря совершенно не зависит ни от каких входов, хотя некоторые из элементов
этой совокупности могут быть получены компиляцией.

    Кроме того, теперь становится необходимым различать случаи, когда входы взаимно независимы
и когда это не так. Иными словами, возможны (с точностью до взаимного переименования входов)
три ситуации:

    1. $d(s_1)\cap gen(s_2) = \emptyset, d(s_2)\cap gen(s_1)=\emptyset$ --- входы совершенно независимы.
	
    2. $d(s_1)\cap gen(s_2) = \emptyset, d(s_2)\cap gen(s_1)\neq\emptyset$ --- $s_2$ зависит от $s_1$.
	
    3. $d(s_1)\cap gen(s_2)\neq\emptyset, d(s_2)\cap gen(s_1)\neq\emptyset$ --- $s_1$ и $s_1$ взаимозависимы.

    Для последнего случая надо уметь делать gen(дизъюнктная часть зависимостей $s_1$ и $s_2$; $s_1, s_2$).
    Разумеется, это все надо уметь обобщать на случай произвольного количества $s_i$, включая из
"цепочечную" зависимость. Мне кажется, это не должно быть трудно.

    С точки зрения новых определений d и gen надо модернизировать наши рассуждения, связанные
с $\delta^\rho_\alpha\sigma$. Мне кажется, там многое упростится.

    И, наконец, переходя к задаче переиспользования: если есть $\sigma_i$ и их $\omega_i$, то мы выбираем
из каждого $\sigma_i$ некоторое подмножество входов $\sigma_i^\prime$, при этом, конечно, эти подмножества
попарно дизъюнктны. И, очевидно, что для каждого $\sigma_i^\prime$ мы можем во множество порождений
включить максимум $\omega_i^\prime$ (то есть образ всего $\sigma_i$ при отображении gen). Ну и осталось проверить,
что для каждого $s\in\sigma_i^\prime d(s)\subseteq\omega_i^\prime$. Как-то так.

\end{document}